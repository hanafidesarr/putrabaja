
%nav.navbar.navbar-light.navbar-expand-md.bg-faded.justify-content-center
  .container
    - if (images = @setting.images).present?
      = link_to "/", class: "navbar-brand d-flex w-50 me-auto" do
        = image_tag(images.last.asset.url(:thumb), width: "50", style: "margin-right:2rem;")
    - else
      %a.navbar-brand.title-header.navbar-brand.d-flex.w-50.me-auto{:href => "/"}
        .text-secondary= @setting.name
    %button.navbar-toggler{"data-bs-target" => "#collapsingNavbar3", "data-bs-toggle" => "collapse", :type => "button"}
      %span.navbar-toggler-icon
    #collapsingNavbar3.navbar-collapse.collapse.w-100
      %ul.navbar-nav.w-100.justify-content-center
        - @pages.each do |page|
          %li.nav-item.m-1
            - case page.layout
            - when "home"
              = link_to "/", class: "nav-link py-1 text-uppercase #{params[:id].nil? ? 'fw-bold text-primary' : ''}" do
                = page.title

            - when "categories"
              .dropdown
                #dropdownMenuButton.dropdown-toggle.nav-link.p-1.text-uppercase{"aria-expanded" => "false", "aria-haspopup" => "true", "data-toggle" => "dropdown", :type => "button"}
                  = page.title
                .dropdown-menu{"aria-labelledby" => "dropdownMenuButton"}
                  - if @categories.present?
                    - @categories.each do |category|
                      =link_to category.name, category_path(category), class: "dropdown-item"
            - else
              - if ( childrens = page.children ).present?
                .dropdown
                  #dropdownMenuButtonPage.dropdown-toggle.p-1.nav-link.text-uppercase{"aria-expanded" => "false", "aria-haspopup" => "true", "data-toggle" => "dropdown", :type => "button", class: "#{childrens.pluck(:id).include?(params[:id].to_i) ? 'fw-bold text-primary' : ''}"}
                    = page.title
                  .dropdown-menu{"aria-labelledby" => "dropdownMenuButtonPage"}
                    - childrens.order(:position).each do |child|
                      =link_to child.title, page_path(child), class: "dropdown-item #{child.id.to_s.eql?(params[:id].to_i.to_s) ? 'fw-bold text-primary' : ''}"
              - else
                = link_to page_path(page), class: "nav-link py-1 text-uppercase #{page.id.to_s.eql?(params[:id].to_i.to_s) ? 'fw-bold text-primary' : ''}" do
                  = page.title
        -# %li.nav-item.active
        -#   %a.nav-link{:href => "#"} Link
        -# %li.nav-item
        -#   %a.nav-link{:href => "//codeply.com"} Codeply
        -# %li.nav-item
        -#   %a.nav-link{:href => "#"} Link
      %ul.nav.navbar-nav.ms-auto.w-100.justify-content-end
        %li.nav-item
          %a.nav-link{:href => "#"} Right
        %li.nav-item
          %a.nav-link{:href => "#"} Right
        %li.nav-item.dropdown
          %a#navbarScrollingDropdown.nav-link.dropdown-toggle{"aria-expanded" => "false", "data-bs-toggle" => "dropdown", :href => "#", :role => "button"} Menu
          %ul.dropdown-menu.dropdown-menu-right{"aria-labelledby" => "navbarScrollingDropdown"}
            %li
              %a.dropdown-item{:href => "#"} Item
            %li
              %a.dropdown-item{:href => "#"} Item
            %li
              %hr.dropdown-divider/
            %li
              %a.dropdown-item{:href => "#"} Item
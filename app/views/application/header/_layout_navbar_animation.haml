- unless device.eql?("desktop")
  =render partial: "application/header/layout_center"
- else
  - background_navbar = device.eql?("desktop") ? @page&.background_color_desktop : @page&.background_color_mobile
  :css

    i {
      margin-right: 10px;
    }
    /*----------multi-level-accordian-menu------------*/
    .navbar-logo{
      padding: 15px;
      color: #ffff;
    }
    .navbar-mainbg{
      background-color: #5161ce;
      
      padding: 0px;
    }
    #navbarSupportedContent ul{
      padding: 0px;
      margin: 0px;
    }
    #navbarSupportedContent ul li a i{
      margin-right: 10px;
    }
    #navbarSupportedContent li {
      list-style-type: none;
      float: left;
    }
    #navbarSupportedContent ul li a{
      color: rgba(255,255,255,0.5);
        text-decoration: none;
        font-size: 15px;
        display: block;
        padding: 20px 20px;
        transition-duration:0.6s;
      transition-timing-function: cubic-bezier(0.68, -0.55, 0.265, 1.55);
        position: relative;
    }

    #navbarSupportedContent ul li .custom{
      text-decoration: none;
      font-size: 15px;
      display: block;
      padding: 20px 20px;
      transition-duration:0.6s;
      transition-timing-function: cubic-bezier(0.68, -0.55, 0.265, 1.55);
      position: relative;
    }
    #navbarSupportedContent>ul>li.active>a{
      color: #5161ce !important;
      background-color: transparent;
      transition: all 0.7s;
    }

    #navbarSupportedContent>ul>li.active>.custom{
      color: #5161ce !important;
      background-color: transparent;
      transition: all 0.7s;
    }
    #navbarSupportedContent a:not(:only-child):after {
      content: "";
      position: absolute;
      right: 20px;
      top: 10px;
      font-size: 14px;
      font-family: "Font Awesome 5 Free";
      display: inline-block;
      padding-right: 3px;
      vertical-align: middle;
      font-weight: 900;
      transition: 0.5s;
    }

    #navbarSupportedContent .custom:not(:only-child):after {
      content: "\f105";
      position: absolute;
      right: 20px;
      top: 10px;
      font-size: 14px;
      font-family: "Font Awesome 5 Free";
      display: inline-block;
      padding-right: 3px;
      vertical-align: middle;
      font-weight: 900;
      transition: 0.5s;
    }
    #navbarSupportedContent .active>a:not(:only-child):after {
      transform: rotate(90deg);
    }
    .hori-selector{
      display:inline-block;
      position:absolute;
      height: 100%;
      top: 0px;
      left: 0px;
      transition-duration:0.6s;
      transition-timing-function: cubic-bezier(0.68, -0.55, 0.265, 1.55);
      background-color: #fafafa;
      border-top-left-radius: 15px;
      border-top-right-radius: 15px;
      margin-top: 10px;
    }
    .hori-selector .right,
    .hori-selector .left{
      position: absolute;
      width: 25px;
      height: 25px;
      background-color: #fafafa;
      bottom: 10px;
    }
    .hori-selector .right{
      right: -25px;
    }
    .hori-selector .left{
      left: -25px;
    }
    .hori-selector .right:before,
    .hori-selector .left:before{
      content: '';
        position: absolute;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background-color: #5161ce;
    }
    .hori-selector .right:before{
      bottom: 0;
        right: -25px;
    }
    .hori-selector .left:before{
      bottom: 0;
        left: -25px;
    }




    @media (max-width: 991px){
      #navbarSupportedContent ul li a{
        padding: 12px 30px;
      }
      .hori-selector{
        margin-top: 0px;
        margin-left: 10px;
        border-radius: 0;
        border-top-left-radius: 25px;
        border-bottom-left-radius: 25px;
      }
      .hori-selector .left,
      .hori-selector .right{
        right: 10px;
      }
      .hori-selector .left{
        top: -25px;
        left: auto;
      }
      .hori-selector .right{
        bottom: -25px;
      }
      .hori-selector .left:before{
        left: -25px;
        top: -25px;
      }
      .hori-selector .right:before{
        bottom: -25px;
        left: -25px;
      }
    }

  %nav.navbar.navbar-expand-lg.navbar-mainbg
    =link_to root_path, class: "text-white navbar-logo", style: "z-index: 100;" do
      =@setting.name
    %button.navbar-toggler{"aria-controls" => "navbarSupportedContent", "aria-expanded" => "false", "aria-label" => "Toggle navigation", "data-target" => "#navbarSupportedContent", "data-toggle" => "collapse", :type => "button"}
      %i.fas.fa-bars.text-white
    #navbarSupportedContent.collapse.navbar-collapse
      %ul.navbar-nav.ml-auto
        .hori-selector
          .left
          .right
        - @pages.each do |page|
          - case page.layout
          - when "home"

            %li.nav-item{id: "page-li-#{page.id}", class: "#{ ( page.layout.eql?("home") && params[:id].nil? ) || page.id.to_i.eql?(params[:id].to_i) ? 'active' : ''}"}
              =link_to page.title, root_path, class: "nav-link", style: "color: #{@page&.text_color_desktop.presence || 'white'}"
          - else
            - if (childrens = page.children).present?
              %li.nav-item{id: "page-li-#{page.id}", class: "#{ page.id.to_i.eql?(params[:id].to_i) || childrens.pluck(:id).include?(params[:id].to_i) ? 'active' : ''}"}
                .custom.dropdown.nav-link{style: "color: #{@page&.text_color_desktop.presence || 'white'}"}
                  #dropdownMenuButton.dropdown-toggle{"aria-expanded" => "false", "aria-haspopup" => "true", "data-toggle" => "dropdown", :type => "button"}
                    =page.title
                  .dropdown-menu.bg-red{"aria-labelledby" => "dropdownMenuButton", style: "z-index: 10000; box-shadow: #cbcccd 11px 11px 23px 0px; border-radius: 10px;"}
                    - childrens.order(:position).each do |child|
                      =link_to child.title, page_path(child), class: "dropdown-item text-primary py-2 #{child.id.eql?(params[:id].to_i) ? 'fw-bold' : ''}"
            - else
              %li.nav-item{id: "page-li-#{page.id}", class: "#{ ( page.layout.eql?("home") && params[:id].nil? ) || page.id.to_i.eql?(params[:id].to_i) ? 'active' : ''}"}
                =link_to page.title, page_url(page), class: "nav-link", style: "color: #{@page&.text_color_desktop.presence || 'white'}"

          :javascript
            $("#click-page-#{page.id}").on("click",function(e){
              window.location.replace("#{page_url(page)}");
            });
            $(document).ready(function(){
              $("#hover-page-#{page.id}").on("mouseover",function(e){
                $(".hehe").slideDown();
                console.log("ini punya children")
              });
            })
            
    -# .collapsingNavbar3.navbar-collapse.collapse.w-100.right-side
    -#   %ul.navbar-nav.ms-auto.w-100.justify-content-end.my-0
    -#     %li.nav-item
    -#       - if user_signed_in?
    -#         %a.text-white.nav-link="Hallo, #{current_user.email}"
    -#         =link_to destroy_user_session_path, method: 'delete', class: "btn bg-yellow nav-link", style: "color: #{@page&.text_color_desktop.presence || 'white'}" do
    -#           %i.fa.fa-exit
    -#           ="KELUAR"
    -#       - else
    -#         =link_to new_user_session_path, class: "nav-link", style: "color: #{@page&.text_color_desktop.presence || 'white'}" do
    -#           %i.fa.fa-user
    -#           ="DAFTAR/MASUK"


  :javascript
    // ---------Responsive-navbar-active-animation-----------
    function test(){
      var tabsNewAnim = $('#navbarSupportedContent');
      var selectorNewAnim = $('#navbarSupportedContent').find('li').length;
      var activeItemNewAnim = tabsNewAnim.find('.active');
      var activeWidthNewAnimHeight = activeItemNewAnim.innerHeight();
      var activeWidthNewAnimWidth = activeItemNewAnim.innerWidth();
      var itemPosNewAnimTop = activeItemNewAnim.position();
      var itemPosNewAnimLeft = activeItemNewAnim.position();
      $(".hori-selector").css({
        "top":itemPosNewAnimTop.top + "px",
        "left":itemPosNewAnimLeft.left + "px",
        "height": activeWidthNewAnimHeight + "px",
        "width": activeWidthNewAnimWidth + "px"
      });
      $("#navbarSupportedContent").on("mouseover","li",function(e){
        $('#navbarSupportedContent ul li').removeClass("active");
        $(this).addClass('active');
        var activeWidthNewAnimHeight = $(this).innerHeight();
        var activeWidthNewAnimWidth = $(this).innerWidth();
        var itemPosNewAnimTop = $(this).position();
        var itemPosNewAnimLeft = $(this).position();
        $(".hori-selector").css({
          "top":itemPosNewAnimTop.top + "px",
          "left":itemPosNewAnimLeft.left + "px",
          "height": activeWidthNewAnimHeight + "px",
          "width": activeWidthNewAnimWidth + "px"
        });
      }).mouseout(function() {
        $('#navbarSupportedContent ul li').removeClass("active");
        var current_page = $("#page-li-#{@page.parent_id || @page.id}")
        current_page.addClass('active');

        var activeWidthNewAnimHeight = current_page.innerHeight();
        var activeWidthNewAnimWidth = current_page.innerWidth();
        var itemPosNewAnimTop = current_page.position();
        var itemPosNewAnimLeft = current_page.position();
        $(".hori-selector").css({
          "top":itemPosNewAnimTop.top + "px",
          "left":itemPosNewAnimLeft.left + "px",
          "height": activeWidthNewAnimHeight + "px",
          "width": activeWidthNewAnimWidth + "px"
        });
      });
    }
    $(document).ready(function(){
      setTimeout(function(){ test(); });
    });
    $(window).on('resize', function(){
      setTimeout(function(){ test(); }, 500);
    });
    $(".navbar-toggler").hover(function(){
      setTimeout(function(){ test(); });
    });
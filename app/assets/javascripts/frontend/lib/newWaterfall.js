$.fn.NewWaterfall=function(t){var e=$.extend({},{width:360,delay:60,repeatShow:!1},t),h=this,o=function(t){$(window).scrollTop()+$(window).height()>$(t).offset().top?$(t).addClass("show"):$(window).scrollTop()+$(window).height()<$(t).offset().top&&e.repeatShow&&$(t).removeClass("show")},i=function(){if(!(h.length<=0)){h.css({position:"relative"});var t=$(h).children("li");if(!(t.length<=0)){var i=$(h).width(),s=parseInt(i/e.width);t.length<s&&(s=t.length);var l=(i-s*e.width)/2;if(s>0){$(h).removeClass("min"),t.css({position:"absolute",width:e.width});for(var r=0,a=[],n=[],f=0;f<t.length;f++)a.push({index:f,bottom:0,height:$(t[f]).height()});for(var f=0;f<s;f++)n.push([]);for(var f=0;f<t.length;f++)if(f<s)a[f].bottom=a[f].height,n[f].push(a[f]);else{for(var g=0,d=0,v=0;v<s;v++){var p=n[v][n[v].length-1].bottom+a[f].height;(0==g||p<g)&&(g=p,d=v)}a[f].bottom=g,n[d].push(a[f])}for(var f=0;f<n.length;f++)for(var v=0;v<n[f].length;v++)$(t[n[f][v].index]).css({left:f*e.width+l,top:n[f][v].bottom-n[f][v].height});for(var f=0;f<n.length;f++){var w=n[f][n[f].length-1].bottom;r<w&&(r=w)}$(h).css("height",r)}else t.attr("style",""),h.attr("style",""),$(h).addClass("min");for(var f=0;f<t.length;f++)o(t[f])}}};i(),setInterval(i,e.delay)};